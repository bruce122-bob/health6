<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试地图数据加载</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .data-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
        }
        .apartment {
            border-left: 4px solid #FF6B9D;
        }
        .shelter {
            border-left: 4px solid #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>地图数据加载测试</h1>
        
        <div id="testResults">
            <div class="test-result info">正在测试数据加载...</div>
        </div>
        
        <div id="dataDisplay">
            <h2>数据详情</h2>
            <div id="dataList">正在加载...</div>
        </div>
    </div>

    <script src="shelter-data.js"></script>
    <script>
        function runTests() {
            const resultsDiv = document.getElementById('testResults');
            const dataListDiv = document.getElementById('dataList');
            
            // 清空结果
            resultsDiv.innerHTML = '';
            dataListDiv.innerHTML = '';
            
            // 测试1：检查shelterData是否存在
            if (typeof shelterData !== 'undefined') {
                resultsDiv.innerHTML += '<div class="test-result success">✅ shelterData 变量存在</div>';
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">❌ shelterData 变量不存在</div>';
                return;
            }
            
            // 测试2：检查数据长度
            if (shelterData.length > 0) {
                resultsDiv.innerHTML += `<div class="test-result success">✅ 数据加载成功，共 ${shelterData.length} 条记录</div>`;
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">❌ 数据为空</div>';
                return;
            }
            
            // 测试3：检查公寓数据
            const apartments = shelterData.filter(item => item.type === 'apartment');
            if (apartments.length > 0) {
                resultsDiv.innerHTML += `<div class="test-result success">✅ 找到 ${apartments.length} 个女性友好公寓</div>`;
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">❌ 未找到女性友好公寓数据</div>';
            }
            
            // 测试4：检查庇护所数据
            const shelters = shelterData.filter(item => item.type === 'shelter');
            if (shelters.length > 0) {
                resultsDiv.innerHTML += `<div class="test-result success">✅ 找到 ${shelters.length} 个庇护所</div>`;
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">❌ 未找到庇护所数据</div>';
            }
            
            // 显示公寓数据详情
            if (apartments.length > 0) {
                dataListDiv.innerHTML += '<h3>女性友好公寓</h3>';
                apartments.forEach((apartment, index) => {
                    dataListDiv.innerHTML += `
                        <div class="data-item apartment">
                            <h4>${index + 1}. ${apartment.name}</h4>
                            <p><strong>类型:</strong> ${apartment.type}</p>
                            <p><strong>地址:</strong> ${apartment.address}</p>
                            <p><strong>城市:</strong> ${apartment.city}, ${apartment.province}</p>
                            <p><strong>坐标:</strong> [${apartment.position[0]}, ${apartment.position[1]}]</p>
                            <p><strong>特色服务:</strong> ${apartment.services.join(', ')}</p>
                            ${apartment.specialNote ? `<p><strong>特别说明:</strong> ${apartment.specialNote}</p>` : ''}
                        </div>
                    `;
                });
            }
            
            // 显示前3个庇护所数据作为对比
            if (shelters.length > 0) {
                dataListDiv.innerHTML += '<h3>庇护所（前3个作为对比）</h3>';
                shelters.slice(0, 3).forEach((shelter, index) => {
                    dataListDiv.innerHTML += `
                        <div class="data-item shelter">
                            <h4>${index + 1}. ${shelter.name}</h4>
                            <p><strong>类型:</strong> ${shelter.type || 'shelter'}</p>
                            <p><strong>地址:</strong> ${shelter.address}</p>
                            <p><strong>城市:</strong> ${shelter.city}, ${shelter.province}</p>
                            <p><strong>坐标:</strong> [${shelter.position[0]}, ${shelter.position[1]}]</p>
                            <p><strong>提供服务:</strong> ${shelter.services.join(', ')}</p>
                        </div>
                    `;
                });
            }
        }
        
        // 页面加载完成后运行测试
        window.addEventListener('load', function() {
            setTimeout(runTests, 100);
        });
    </script>
</body>
</html> 