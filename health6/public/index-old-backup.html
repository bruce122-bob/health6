<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>She Haven</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <!-- Firebase 初始化配置 -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAj6iwv8tAcFGqa0r0GDfNQHCTNBnGeZo8",
            authDomain: "safe-b29.firebaseapp.com",
            databaseURL: "https://safe-b29-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "safe-b29",
            storageBucket: "safe-b29.firebasestorage.app",
            messagingSenderId: "253210723999",
            appId: "1:253210723999:web:41f4bdef8689f45b0cc4aa"
        };
        
        // 初始化 Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
            console.log('Firebase 初始化成功');
        }
    </script>
    
    <!-- 添加认证管理脚本 -->
    <script src="auth.js"></script>
    <!-- 添加本地登录脚本 -->
    <script src="local-login.js"></script>
    
    <!-- 添加其他脚本 -->
    <script src="script.js" defer></script>
    <script src="stats.js" defer></script>

    <!-- 添加Leaflet地图库 -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <!-- 添加定位控件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>
    <!-- 添加搜索控件 -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <!-- 添加标记聚类 -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <style>
        /* 全局样式 */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            scroll-behavior: smooth;
        }
        
        /* 主标题区域 */
        .main-title {
            background: linear-gradient(rgba(26, 49, 99, 0.7), rgba(26, 49, 99, 0.9)), url('images/banner.jpg') no-repeat center center;
            background-size: cover;
            color: white;
            text-align: center;
            padding: 120px 20px;
            margin-top: 60px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        /* 英文翻译样式 */
        .translation {
            display: block;
            font-size: 0.8em;
            color: #ccc;
            margin-top: 5px;
        }
        
        /* 内联翻译样式 */
        .inline-translation {
            margin-left: 5px;
            font-size: 0.8em;
            color: #666;
        }
        
        /* 顶部导航栏样式 */
        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
        
        /* 导航链接样式 */
        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .nav-links li {
            margin: 0 10px;
        }
        
        .nav-links a {
            color: #333;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .nav-links a:hover {
            background-color: #f5f5f5;
        }
        
        /* 用户区域样式 */
        .user-area {
            display: flex;
            align-items: center;
            margin-left: auto;
        }
        
        .user-area a {
            color: #333;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .user-area a:hover {
            background-color: #f5f5f5;
        }
        
        /* 内容区域 */
        .content-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* 标题 */
        .section-title {
            text-align: center;
            margin: 40px 0 20px;
            position: relative;
        }
        
        /* 登录状态提示 */
        .login-status {
            text-align: center;
            padding: 10px;
            margin-top: 60px;
            background-color: #f8f9fa;
            display: none;
        }
        
        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            width: 80%;
            max-width: 400px;
            border-radius: 8px;
            position: relative;
        }
        
        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #555;
        }
        
        /* 表单样式 */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .submit-btn {
            background-color: #1a3163;
            color: white;
            border: none;
            padding: 12px 15px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        
        .submit-btn:hover {
            background-color: #12234a;
        }
        
        /* 轮播图样式 */
        .slideshow-container {
            position: relative;
            margin: auto;
            max-width: 100%;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .mySlides {
            display: none;
            width: 100%;
        }
        
        .mySlides.active {
            display: block;
        }
        
        .slideshow-img {
            width: 100%;
            height: auto;
        }
        
        .prev, .next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            font-weight: bold;
            padding: 16px;
            color: white;
            background-color: rgba(0,0,0,0.5);
            cursor: pointer;
            transition: 0.3s;
            user-select: none;
        }
        
        .prev {
            left: 0;
            border-radius: 0 3px 3px 0;
        }
        
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }
        
        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.8);
        }
        
        .slideshow-title {
            margin-top: 0;
            font-size: 1.2em;
            color: #333;
        }
        
        /* 社区信息样式 */
        .community-info {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        /* 寻人启事样式 */
        .missing-persons-section {
            margin-top: 40px;
        }
        
        .missing-persons-list {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .missing-person-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            width: calc(50% - 10px);
            display: flex;
            transition: transform 0.3s;
        }
        
        .missing-person-card:hover {
            transform: translateY(-5px);
        }
        
        .missing-person-image {
            width: 30%;
            overflow: hidden;
        }
        
        .missing-person-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .missing-person-info {
            width: 70%;
            padding: 15px;
        }
        
        .missing-person-info h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #333;
        }
        
        .missing-date, .missing-location, .missing-description {
            margin: 5px 0;
            font-size: 0.9em;
            color: #666;
        }
        
        .more-info-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 15px;
            background-color: #1a3163;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9em;
            transition: background-color 0.3s;
        }
        
        .more-info-btn:hover {
            background-color: #12234a;
        }
        
        .post-missing-person {
            text-align: center;
            margin-top: 30px;
        }
        
        .post-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .post-btn:hover {
            background-color: #c0392b;
        }
        
        .image-upload input[type="file"] {
            border: 1px dashed #ddd;
            padding: 20px;
            text-align: center;
            cursor: pointer;
        }
        
        /* 汉堡菜单按钮样式 */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1002;
        }
        
        .menu-toggle span {
            width: 30px;
            height: 3px;
            background: #333;
            border-radius: 3px;
            transition: all 0.3s linear;
            position: relative;
            transform-origin: 1px;
        }
        
        /* 汉堡菜单动画效果 */
        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg);
        }
        
        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            /* 顶部导航栏在移动设备上的样式 */
            .top-nav {
                padding: 15px 20px;
                justify-content: center;
                position: relative;
            }
            
            .nav-links {
                display: none;
                position: absolute;
                top: 60px;
                left: 0;
                width: 100%;
                background: #fff;
                padding: 15px 0;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                z-index: 1002;
                flex-direction: column;
                align-items: center;
                border-radius: 0 0 10px 10px;
                opacity: 0;
                transition: opacity 0.2s ease;
            }
            
            .nav-links a {
                margin: 8px 0;
                text-align: center;
                font-size: 16px;
                padding: 12px 20px;
                display: block;
                width: 80%;
                border-radius: 6px;
                transition: all 0.3s ease;
            }
            
            .nav-links a:hover {
                background-color: #f0f0f0;
            }
            
            /* 显示汉堡菜单按钮 */
            .menu-toggle {
                display: flex;
                position: absolute;
                left: 15px;
                top: 13px;
            }
            
            /* 用户区域在手机端的样式 */
            .user-area {
                margin-left: auto;
                width: auto;
                position: absolute;
                right: 15px;
            }
            
            /* 在移动端上的轮播图 */
            .slideshow-container {
                margin-top: 10px;
            }
            
            /* 在移动端上的寻人启事卡片 */
            .missing-person-card {
                width: 100%;
                flex-direction: column;
            }
            
            .missing-person-image {
                width: 100%;
                height: 150px;
            }
            
            .missing-person-info {
                width: 100%;
            }
            
            /* 主标题在移动端上的样式 */
            .main-title {
                padding: 60px 20px;
            }
            
            .main-title h1 {
                font-size: 3em !important;
            }
        }
        
        /* 网站介绍区和资讯区在小屏幕上的样式 */
        @media (max-width: 992px) {
            .content-container > div > div {
                width: 100% !important;
                margin-right: 0 !important;
            }
        }
        
        /* 轮播图导航按钮在移动端上的样式 */
        @media (max-width: 480px) {
            .prev, .next {
                padding: 8px;
                font-size: 16px;
            }
        }
        
        /* 收起功能的样式 */
        .collapsible-section {
            position: relative;
            background: #f9f9f9;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .collapsible-section.collapsed {
            max-height: 60px !important;
        }
        
        .collapse-toggle {
            position: absolute;
            right: 15px;
            top: 15px;
            background: #e74c3c;
            color: white;
            border: none;
            width: 80px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1;
            transition: background-color 0.3s;
        }
        
        .collapse-toggle:hover {
            opacity: 0.9;
        }
        
        .collapse-toggle:active {
            transform: scale(0.98);
        }
        
        /* 安全资料区样式 */
        .safety-resources-section {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .resource-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            background-color: #f0f0f0;
            border: none;
            padding: 10px 20px;
            margin: 0 10px 10px 0;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .tab-btn:hover {
            background-color: #e0e0e0;
        }
        
        .tab-btn.active {
            background-color: #1a3163;
            color: white;
        }
        
        .resource-content {
            display: none;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .resource-content.active {
            display: block;
        }
        
        .resource-content h3 {
            color: #1a3163;
            border-bottom: 2px solid #1a3163;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .safety-category {
            margin-bottom: 25px;
        }
        
        .safety-category h4 {
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .safety-category h5 {
            font-weight: 600;
            color: #444;
            margin-bottom: 10px;
        }
        
        .safety-item {
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 3px solid #e0e0e0;
        }
        
        .safety-category ul {
            padding-left: 20px;
            margin: 0;
        }
        
        .safety-category li {
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .safety-resources-section {
                padding: 15px;
            }
            
            .tab-btn {
                padding: 8px 15px;
                font-size: 14px;
                margin: 0 5px 10px 0;
            }
        }
        
        @keyframes simpleEntrance {
            0% {
                opacity: 0;
                transform: translateY(-30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .letter {
            display: inline-block;
        }
        
        @keyframes glowPulse {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            50% {
                opacity: 0.4;
                transform: scale(1.1);
            }
            100% {
                opacity: 0;
                transform: scale(0.9);
            }
        }
        
        /* 删除闪光效果 */
        @keyframes shine-sweep {
            0% {
                left: -100px;
            }
            100% {
                left: 120%;
            }
        }
        
        /* 删除3D闪耀效果 */
        .title-3d-shine {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            position: absolute;
            transform: skewX(-20deg);
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            animation: shine 2s ease-in-out 2s infinite;
        }
        
        @keyframes shine {
            0% { left: -100%; }
            100% { left: 200%; }
        }
    </style>
</head>
<body>
    <!-- 顶部导航区域 -->
    <div class="top-nav">
        <nav>
            <ul class="nav-links">
                <li><a href="index.html" class="logo-link"><img src="images/logo.png" alt="She Haven Logo" class="nav-logo" style="height: 40px; width: auto;"></a></li>
                <li><a href="fullscreen-map.html">安全地图<span class="inline-translation">Safety Map</span></a></li>
                <li><a href="community.html">交流社区<span class="inline-translation">Community</span></a></li>
                <li><a href="anonymous-tree-hole.html">匿名树洞<span class="inline-translation">Anonymous Tree Hole</span></a></li>
                <li><a href="resources.html">资料区<span class="inline-translation">Resources</span></a></li>
                <li><a href="#emergency">寻人启事<span class="inline-translation">Missing Person Notice</span></a></li>
            </ul>
        </nav>

        <!-- 汉堡菜单按钮 - 仅在移动端显示 -->
        <button class="menu-toggle" id="menuToggle" type="button" aria-label="菜单">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- 用户区域 - 右侧 -->
        <div class="user-area">
            <!-- 未登录显示 -->
            <div id="loginButtons" style="display: flex;">
                <a href="javascript:void(0)" onclick="showLoginModal()">登录<span class="inline-translation">Login</span></a>
                <a href="javascript:void(0)" onclick="showRegisterModal()">加入我们<span class="inline-translation">Join Us</span></a>
            </div>
            
            <!-- 已登录显示 -->
            <div id="userArea" style="display: none;">
                <a href="javascript:void(0)" id="userNameDisplay">用户名</a>
                <a href="javascript:void(0)" onclick="showAccountSettingsModal()">账号设置<span class="inline-translation">Account</span></a>
                <a href="javascript:void(0)" onclick="logoutUser()">退出<span class="inline-translation">Logout</span></a>
            </div>
        </div>
    </div>

    <!-- 登录状态提示 -->
    <div class="login-status" id="loginStatus"></div>
    
    <!-- 主标题区域 -->
    <div class="banner-area">
        <div class="banner-text">
            <div class="logo-container">
                <h1>
                    <span class="chinese-title"></span>
                    <span class="english-title"></span>
                </h1>
            </div>
        </div>
    </div>

    <!-- 内容区域 -->
    <div class="content-container">
        <!-- 使用flex布局将网站介绍和资讯区并排显示 -->
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between; margin-top: 40px;">
            <!-- 网站介绍区域 - 左侧 -->
            <div style="width: 48%; min-width: 300px; margin-right: 2%;">
                <h2 class="section-title" style="text-align: left;">网站介绍
                    <span class="translation">Website Introduction</span>
                </h2>
                <div class="introduction-text" style="margin-top: 20px; line-height: 1.6; font-size: 1em; text-align: left;">
                    <p>「SheHaven」 是一个致力于女性安全与权益的在线平台，我们提供一个开放、自由的空间，让每一位女性的声音都能被听见，让女性安全不再是一种侃侃而谈，而是看得见的权力。我们鼓励女性分享经验、学习自我保护知识，并团结彼此，共同推动社会的正向改变。微光不灭，终将燎原，每一个她都值得被温柔以待！</p>
                    
                    <p style="margin-top: 15px; color: #666; font-style: italic; font-size: 0.95em;">
                        SheHaven is an online platform dedicated to women's safety and rights. We provide an open and free space where every woman's voice can be heard, ensuring that women's safety is no longer just a topic of discussion but a visible right. We encourage women to share their experiences, learn self-protection skills, and unite to drive positive social change. Every small light will eventually ignite a prairie fire, and every woman deserves to be treated with gentleness!
                    </p>
                </div>
            </div>

            <!-- 资讯区 - 右侧 -->
            <div style="width: 48%; min-width: 300px;">
                <!-- 使用flex布局和justify-content: flex-start来放置两个标题 -->
                <div style="display: flex; justify-content: flex-start; align-items: center; margin-bottom: 20px;">
                    <!-- 空白区域，用于控制资讯区标题的位置 -->
                    <div style="width: 45%;"></div>
                    
                    <!-- 资讯区标题放在中间偏右位置 -->
                    <h2 class="section-title" id="info-area" style="text-align: center; margin: 0;">资讯区
                        <span class="translation">Information Area</span>
                    </h2>
                </div>
                
                <!-- 图片轮换区域 -->
                <div class="slideshow-section" style="width: 100%; margin-top: 20px;">
                    <h2 class="slideshow-title" style="text-align: left; margin-left: 0;">资料展示 Information Display</h2>
                    <div class="slideshow-container">
                        <div class="mySlides active">
                            <a href="news1.html">
                                <img src="images/news1.jpg" class="slideshow-img" alt="家暴新闻">
                            </a>
                        </div>
                        <div class="mySlides">
                            <a href="news2.html">
                                <img src="images/news2.jpg" class="slideshow-img" alt="卫生用品质量问题">
                            </a>
                        </div>
                        
                        <!-- 导航按钮 -->
                        <a class="prev" onclick="changeSlide(-1)">&#10094;</a>
                        <a class="next" onclick="changeSlide(1)">&#10095;</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加数据统计和寻人启事板块 -->
    <div class="content-container" style="margin-top: 60px;">
        <!-- 资料区 -->
        <div id="safety-resources" class="safety-resources-section">
            <h2 class="section-title">安全资料<span class="translation">Safety Resources</span></h2>
            
            <div class="resource-tabs">
                <button class="tab-btn active" onclick="showResourceTab('travel-safety')">出行安全</button>
                <button class="tab-btn" onclick="showResourceTab('accommodation-safety')">住宿安全</button>
                <button class="tab-btn" onclick="showResourceTab('social-safety')">社交安全</button>
            </div>
            
            <div id="travel-safety" class="resource-content active">
                <h3>出行安全 <span class="translation">Travel Safety</span></h3>
                
                <div class="safety-category">
                    <h4>1. 交通工具选择</h4>
                    <div class="safety-item">
                        <h5>网约车/出租车：</h5>
                        <ul>
                            <li>上车前核对车牌、司机信息是否与平台一致，后排落座。</li>
                            <li>行车中分享行程给亲友，避免透露过多个人信息。</li>
                        </ul>
                    </div>
                    <div class="safety-item">
                        <h5>公共交通：</h5>
                        <ul>
                            <li>避免在深夜时段独自乘车，若必须则选择靠近司机或监控的位置。</li>
                            <li>警惕周围异常情况（如被尾随、过度搭讪），必要时提前下车到人多处。</li>
                        </ul>
                    </div>
                    <div class="safety-item">
                        <h5>自驾：</h5>
                        <ul>
                            <li>上车前检查后座和车底，锁好车门后再启动。</li>
                            <li>提前规划路线，避免偏僻路段，保持油箱充足。</li>
                        </ul>
                    </div>
                </div>
                
                <div class="safety-category">
                    <h4>2. 步行/骑行</h4>
                    <ul>
                        <li>避免长时间低头看手机或戴耳机，保持对环境的警觉。</li>
                        <li>走明亮、人多的街道，绕行无监控的窄巷、地下通道。</li>
                        <li>随身携带便携警报器或防身工具（需熟悉当地法律）</li>
                    </ul>
                </div>
                
                <div class="safety-category">
                    <h4>3. 夜间出行</h4>
                    <ul>
                        <li>尽量结伴而行，告知亲友目的地及预计返回时间。</li>
                        <li>穿着轻便、易活动的鞋服，减少贵重物品外露。</li>
                    </ul>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <a href="personal-safety-guide.html" style="display: inline-block; padding: 8px 20px; background-color: #1a3163; color: white; text-decoration: none; border-radius: 5px; transition: background-color 0.3s;">查看详情 <span class="translation">View Details</span></a>
                </div>
            </div>
            
            <div id="accommodation-safety" class="resource-content">
                <h3>住宿安全 <span class="translation">Accommodation Safety</span></h3>
                
                <div class="safety-category">
                    <h4>1. 独居安全</h4>
                    <ul>
                        <li>安装防盗门锁、阻门器、可视门铃或监控设备。</li>
                        <li>外卖/快递使用化名（如"X先生"），避免门牌信息暴露独居状态。</li>
                        <li>定期检查门窗锁具，空调外机、阳台等易攀爬处加装防护栏。</li>
                    </ul>
                </div>
                
                <div class="safety-category">
                    <h4>2. 酒店/民宿</h4>
                    <ul>
                        <li>选择正规平台预订，查看安全评价，避免入住偏僻区域。</li>
                        <li>入住后检查门窗、镜子（防偷窥）、摄像头（可用手机摄像头扫描红外线）。</li>
                        <li>使用阻门器或椅子抵门，房卡不离身，不随意透露房间号。</li>
                    </ul>
                </div>
                
                <div class="safety-category">
                    <h4>3. 应对陌生人</h4>
                    <ul>
                        <li>维修/上门服务要求核实身份（通过物业或官方电话确认）。</li>
                        <li>独居时避免让陌生人知晓具体住址，快递单销毁个人信息。</li>
                    </ul>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <a href="personal-safety-guide.html" style="display: inline-block; padding: 8px 20px; background-color: #1a3163; color: white; text-decoration: none; border-radius: 5px; transition: background-color 0.3s;">查看详情 <span class="translation">View Details</span></a>
                </div>
            </div>
            
            <div id="social-safety" class="resource-content">
                <h3>社交安全 <span class="translation">Social Safety</span></h3>
                
                <div class="safety-category">
                    <h4>1. 陌生人交往</h4>
                    <ul>
                        <li>初次见面选择公共场所（咖啡馆、商场），告知亲友见面对象信息。</li>
                        <li>避免饮用离开视线的饮品，自备未开封饮料或要求当面制作。</li>
                        <li>不轻易透露住址、工作单位等敏感信息。</li>
                    </ul>
                </div>
                
                <div class="safety-category">
                    <h4>2. 聚会/娱乐场所</h4>
                    <ul>
                        <li>控制酒精摄入量，保持清醒，提前约定信任的朋友互相照应。</li>
                        <li>离座后返回不喝剩余饮料，谨防药物混入。</li>
                        <li>提前预约正规代驾，拒绝陌生人"顺路送回家"提议。</li>
                    </ul>
                </div>
                
                <div class="safety-category">
                    <h4>3. 职场/网络社交</h4>
                    <ul>
                        <li>谨慎添加陌生人联系方式，朋友圈避免暴露日常行踪（如定位、家门照片）。</li>
                        <li>警惕"高薪兼职""快速赚钱"等诱导性邀约，核实对方背景。</li>
                        <li>遇到骚扰或威胁，保留证据（聊天记录、录音），及时报警或向平台举报。</li>
                    </ul>
                </div>
                
                <div style="text-align: right; margin-top: 20px;">
                    <a href="personal-safety-guide.html" style="display: inline-block; padding: 8px 20px; background-color: #1a3163; color: white; text-decoration: none; border-radius: 5px; transition: background-color 0.3s;">查看详情 <span class="translation">View Details</span></a>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <a href="emergency-contacts.html" style="display: inline-block; padding: 12px 25px; background-color: #e74c3c; color: white; text-decoration: none; border-radius: 5px; transition: background-color 0.3s; font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
                    <span style="margin-right: 5px;">⚠️</span> 紧急联系方式 <span class="translation">Emergency Contacts</span>
                </a>
            </div>
        </div>
        
        <!-- 寻人启事板块 -->
        <section id="emergency" class="missing-persons-section">
            <h2 class="section-title">寻人启事
                <span class="translation">Missing Person Notice</span>
            </h2>
            <p>发布寻人启事，让更多人参与寻找，提高找回几率
                <span class="translation">Post missing person notices to involve more people in the search and increase the chances of finding them.</span>
            </p>
            
            <div class="missing-persons-list">
                <!-- 这里会通过JavaScript动态加载寻人启事内容 -->
                <div class="missing-person-card">
                    <div class="missing-person-image">
                        <img src="images/missing-person1.jpg" alt="冯兴雪">
                    </div>
                    <div class="missing-person-info">
                        <h3>冯兴雪</h3>
                        <p class="missing-date">失踪日期: 2025年1月23日</p>
                        <p class="missing-location">最后出现地点: 四川省泸州市</p>
                        <p class="missing-description">女，25岁，身高165厘米，体重55公斤。齐肩短发，戴眼镜。</p>
                        <a href="missing-person-detail.html" class="more-info-btn">查看详情 <span class="translation">More Info</span></a>
                    </div>
                </div>
                
                <div class="missing-person-card">
                    <div class="missing-person-image">
                        <img src="images/missing-person-hanyibei.jpg" alt="韩依贝">
                    </div>
                    <div class="missing-person-info">
                        <h3>韩依贝</h3>
                        <p class="missing-date">失踪日期: 2023年10月17日</p>
                        <p class="missing-location">最后出现地点: 山西省阳泉市盂县南娄镇西南关村</p>
                        <p class="missing-description">女，14岁，初三学生，失踪时穿着白色卫衣、蓝黑色牛仔裤。</p>
                        <a href="missing-person-detail-hanyibei.html" class="more-info-btn">查看详情 <span class="translation">More Info</span></a>
                    </div>
                </div>
            </div>
            
            <div class="post-missing-person">
                <button class="post-btn" onclick="showMissingPersonModal()">
                    发布寻人启事 <span class="translation">Post Missing Person</span>
                </button>
            </div>
        </section>
    </div>

    <!-- 登录模态框 -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>登录<span class="translation">Login</span></h2>
            <form id="loginForm">
                <div class="form-group">
                    <label>邮箱<span class="translation">Email</span></label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label>密码<span class="translation">Password</span></label>
                    <input type="password" id="loginPassword" name="password" required>
                </div>
                <div id="loginError" class="form-error" style="color: #ff4444; margin: 10px 0; display: none;"></div>
                <button type="submit" class="submit-btn">登录<span class="translation">Login</span></button>
            </form>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2>加入我们<span class="translation">Join Us</span></h2>
            <form id="registerForm">
                <div class="form-group">
                    <label>邮箱<span class="translation">Email</span></label>
                    <input type="email" id="registerEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label>密码<span class="translation">Password</span></label>
                    <input type="password" id="registerPassword" name="password" required>
                </div>
                <div class="form-group">
                    <label>确认密码<span class="translation">Confirm Password</span></label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                </div>
                <button type="submit" class="submit-btn">注册<span class="translation">Register</span></button>
            </form>
        </div>
    </div>

    <!-- 账号设置模态框 - 使用内联样式确保居中 -->
    <div id="accountSettingsModal" class="modal" style="display: none; position: fixed; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; overflow: hidden;">
        <div style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 400px; background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.5);">
            <span class="close" onclick="closeModal('accountSettingsModal')" style="position: absolute; right: 0; top: 15px; font-size: 28px; font-weight: bold; cursor: pointer; color: #555;">&times;</span>
            <h2 style="margin-top: 0; margin-bottom: 20px; text-align: center;">账号设置<span class="translation">Account Settings</span></h2>
            <form id="accountSettingsForm">
                <div class="form-group">
                    <label for="userName">用户名<span class="translation">Username</span></label>
                    <input type="text" id="userName" name="userName" required>
                </div>
                <button type="submit" class="submit-btn">保存<span class="translation">Save</span></button>
            </form>
        </div>
    </div>

    <!-- 寻人启事发布模态框 - 使用内联样式确保居中 -->
    <div id="postMissingPersonModal" class="modal" style="display: none; position: fixed; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; overflow: hidden;">
        <div style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 400px; background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.5);">
            <span class="close" onclick="closeModal('postMissingPersonModal')" style="position: absolute; right: 0; top: 15px; font-size: 28px; font-weight: bold; cursor: pointer; color: #555;">&times;</span>
            <h2 style="margin-top: 0; margin-bottom: 20px; text-align: center;">发布寻人启事<span class="translation">Post Missing Person</span></h2>
            <form id="missingPersonForm">
                <div class="form-group">
                    <label for="missingName">失踪人姓名<span class="translation">Name</span></label>
                    <input type="text" id="missingName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="missingDate">失踪日期<span class="translation">Missing Date</span></label>
                    <input type="date" id="missingDate" name="date" required>
                </div>
                <div class="form-group">
                    <label for="missingLocation">最后出现地点<span class="translation">Last Seen Location</span></label>
                    <input type="text" id="missingLocation" name="location" required>
                </div>
                <div class="form-group">
                    <label for="missingDescription">人员描述<span class="translation">Description</span></label>
                    <textarea id="missingDescription" name="description" required placeholder="包括年龄、性别、身高、衣着特征等"></textarea>
                </div>
                <div class="form-group">
                    <label for="contactInfo">联系方式<span class="translation">Contact Info</span></label>
                    <input type="text" id="contactInfo" name="contactInfo" required>
                </div>
                <div class="form-group image-upload">
                    <label for="missingPhoto">上传照片 (可选)<span class="translation">Upload Photo (Optional)</span></label>
                    <input type="file" id="missingPhoto" name="photo" accept="image/*">
                </div>
                <button type="submit" class="submit-btn">发布<span class="translation">Submit</span></button>
            </form>
        </div>
    </div>

    <!-- 页脚 -->
    <div class="footer">
        <p>Bruce Joey Sarah</p>
    </div>

    <!-- 登录相关的简化脚本 -->
    <script>
    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
        // 检查是否有登录信息
        const userLoggedIn = localStorage.getItem('userLoggedIn');
        const userName = localStorage.getItem('userName');
        
        if (userLoggedIn === 'true' && userName) {
            // 已登录状态
            document.getElementById('loginButtons').style.display = 'none';
            document.getElementById('userArea').style.display = 'flex';
            document.getElementById('userNameDisplay').textContent = userName;
        } else {
            // 未登录状态
            document.getElementById('loginButtons').style.display = 'flex';
            document.getElementById('userArea').style.display = 'none';
        }
    });
    
    // 显示登录模态框
    function showLoginModal() {
        document.getElementById('loginModal').style.display = 'block';
    }

    // 显示注册模态框
    function showRegisterModal() {
        document.getElementById('registerModal').style.display = 'block';
    }

    // 关闭模态框
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }
    </script>
    
    <!-- 图片轮换脚本 -->
    <script>
        let slideIndex = 0;
        const slides = document.querySelectorAll('.mySlides');
        
        // 显示指定幻灯片
        function showSlide(n) {
            // 计算实际索引
            slideIndex = n;
            if (slideIndex >= slides.length) slideIndex = 0;
            if (slideIndex < 0) slideIndex = slides.length - 1;
            
            // 隐藏所有幻灯片
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove('active');
            }
            
            // 显示当前幻灯片
            slides[slideIndex].classList.add('active');
        }
        
        // 切换到下一个/上一个幻灯片
        function changeSlide(n) {
            showSlide(slideIndex + n);
        }
        
        // 自动轮换幻灯片
        setInterval(function() {
            changeSlide(1);
        }, 5000);
        
        // 添加资料区查看详情按钮悬停效果
        document.addEventListener('DOMContentLoaded', function() {
            const detailsButtons = document.querySelectorAll('.resource-content a');
            
            detailsButtons.forEach(button => {
                button.addEventListener('mouseover', function() {
                    this.style.backgroundColor = '#12234a';
                });
                
                button.addEventListener('mouseout', function() {
                    this.style.backgroundColor = '#1a3163';
                });
            });
            
            // 紧急联系方式按钮悬停效果
            const emergencyButton = document.querySelector('a[href="emergency-contacts.html"]');
            if (emergencyButton) {
                emergencyButton.addEventListener('mouseover', function() {
                    this.style.backgroundColor = '#c0392b';
                });
                
                emergencyButton.addEventListener('mouseout', function() {
                    this.style.backgroundColor = '#e74c3c';
                });
            }
        });
    </script>
    
    <!-- 保留原脚本，确保功能正常 -->
    <script src="script.js"></script>
    <script src="auth.js"></script>
    <!-- 添加本地登录脚本 -->
    <script src="local-login.js"></script>
    <script src="stats.js"></script>

    <!-- 新增的模态框显示和关闭函数 -->
    <script>
    // 显示登录模态框
    function showLoginModal() {
        document.getElementById('loginModal').style.display = 'block';
    }

    // 显示注册模态框
    function showRegisterModal() {
        document.getElementById('registerModal').style.display = 'block';
    }

    // 显示账号设置模态框
    function showAccountSettingsModal() {
        document.getElementById('accountSettingsModal').style.display = 'block';
    }

    // 关闭任何模态框
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    // 显示寻人启事模态框
    function showMissingPersonModal() {
        document.getElementById('postMissingPersonModal').style.display = 'block';
    }
    </script>
    
    <!-- 点击模态框背景关闭 -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 获取所有模态框
        var modals = document.querySelectorAll('.modal');
        
        // 为每个模态框添加点击事件
        modals.forEach(function(modal) {
            modal.addEventListener('click', function(event) {
                // 如果点击的是模态框自身（而不是内容区域）
                if (event.target === this) {
                    this.style.display = 'none';
                    document.body.style.overflow = ''; // 恢复背景滚动
                }
            });
        });
        
        // ESC键关闭模态框
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                modals.forEach(function(modal) {
                    if (modal.style.display === 'block') {
                modal.style.display = 'none';
                        document.body.style.overflow = ''; // 恢复背景滚动
                    }
                });
            }
        });
        
        // 阻止模态框内点击事件冒泡
        var modalContents = document.querySelectorAll('.modal-content');
        modalContents.forEach(function(content) {
            content.addEventListener('click', function(event) {
                event.stopPropagation();
            });
        });
    });
    </script>
    
    <!-- 添加汉堡菜单功能 -->
    <script>
    // 处理汉堡菜单
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.querySelector('.nav-links');
        
        if (menuToggle && navLinks) {
            console.log('找到汉堡菜单按钮');
            
            // 确保移动设备上初始状态菜单是关闭的
            if (window.innerWidth <= 768) {
                navLinks.style.display = 'none';
                console.log('初始化：导航菜单设置为关闭状态');
            }
            
            // 添加点击事件处理
            menuToggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('点击汉堡菜单按钮');
                
                // 添加动画效果的类切换
                menuToggle.classList.toggle('active');
                
                // 切换导航菜单的显示状态
                if (navLinks.style.display === 'flex') {
                    // 关闭菜单
                    navLinks.style.opacity = '0';
                    setTimeout(() => {
                        navLinks.style.display = 'none';
                    }, 200);
                    console.log('关闭导航菜单');
                } else {
                    // 打开菜单
                    navLinks.style.display = 'flex';
                    navLinks.style.opacity = '0';
                    navLinks.style.position = 'absolute';
                    navLinks.style.top = '50px';
                    navLinks.style.left = '0';
                    navLinks.style.width = '100%';
                    navLinks.style.background = '#fff';
                    navLinks.style.flexDirection = 'column';
                    navLinks.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
                    navLinks.style.zIndex = '1002';
                    navLinks.style.transition = 'opacity 0.2s ease';
                    
                    // 强制重绘后设置透明度为1，触发过渡效果
                    setTimeout(() => {
                        navLinks.style.opacity = '1';
                    }, 10);
                    console.log('打开导航菜单');
                }
            });
            
            // 点击菜单项后自动关闭菜单
            const navItems = document.querySelectorAll('.nav-links a');
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    if (window.innerWidth <= 768) {
                        navLinks.style.opacity = '0';
                        setTimeout(() => {
                            navLinks.style.display = 'none';
                        }, 200);
                        menuToggle.classList.remove('active'); // 移除动画效果类
                        console.log('点击导航链接，关闭菜单');
                    }
                });
            });
            
            // 点击页面其他区域关闭菜单
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768 && 
                    navLinks.style.display === 'flex' && 
                    !event.target.closest('#menuToggle') && 
                    !event.target.closest('.nav-links')) {
                    navLinks.style.opacity = '0';
                    setTimeout(() => {
                        navLinks.style.display = 'none';
                    }, 200);
                    menuToggle.classList.remove('active'); // 移除动画效果类
                    console.log('点击页面其他区域，关闭菜单');
                }
            });
        } else {
            console.error('未找到汉堡菜单按钮或导航链接');
        }
    });
    
    // 资料区选项卡切换
    function showResourceTab(tabId) {
        // 隐藏所有内容
        const contents = document.querySelectorAll('.resource-content');
        contents.forEach(content => {
            content.classList.remove('active');
        });
        
        // 移除所有按钮的active类
        const buttons = document.querySelectorAll('.tab-btn');
        buttons.forEach(btn => {
            btn.classList.remove('active');
        });
        
        // 显示选定的内容并激活按钮
        document.getElementById(tabId).classList.add('active');
        document.querySelector(`button[onclick="showResourceTab('${tabId}')"]`).classList.add('active');
    }
    
    // 初始化资料区
    document.addEventListener('DOMContentLoaded', function() {
        // 默认显示出行安全选项卡
        const firstTab = document.querySelector('.resource-content');
        if (firstTab) {
            firstTab.classList.add('active');
        }
        
        const firstBtn = document.querySelector('.tab-btn');
        if (firstBtn) {
            firstBtn.classList.add('active');
        }
    });
    </script>
</body>
</html> 
