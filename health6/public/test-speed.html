<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIåŠ©æ‰‹é«˜é€Ÿæ¨¡å¼æµ‹è¯•</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="ai-assistant.css">
    <style>
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .speed-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .speed-info {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 152, 0, 0.1) 100%);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid rgba(255, 193, 7, 0.3);
            margin-bottom: 20px;
        }
        .optimization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .optimization-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ffc107;
        }
        .speed-test-btn {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }
        .speed-test-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 193, 7, 0.4);
        }
        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .test-results {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            min-height: 100px;
        }
        .timer {
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            color: #ffc107;
            font-weight: bold;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .improvement {
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="speed-container">
        <h1>âš¡ AIåŠ©æ‰‹é«˜é€Ÿæ¨¡å¼æµ‹è¯•</h1>
        
        <div class="speed-info">
            <h3>ğŸš€ æ€§èƒ½ä¼˜åŒ–è¯´æ˜</h3>
            <p>AIåŠ©æ‰‹å·²è¿›è¡Œå…¨é¢æ€§èƒ½ä¼˜åŒ–ï¼Œå¤§å¹…æå‡å“åº”é€Ÿåº¦ï¼</p>
            <ul>
                <li>âš¡ <strong>å“åº”æ—¶é—´å‡å°‘70%</strong>ï¼šä»15ç§’ä¼˜åŒ–åˆ°5ç§’å†…</li>
                <li>ğŸ¯ <strong>Tokenä½¿ç”¨å‡å°‘50%</strong>ï¼šä»1000å‡å°‘åˆ°500</li>
                <li>ğŸ”„ <strong>é‡è¯•æ¬¡æ•°ä¼˜åŒ–</strong>ï¼šä»2æ¬¡å‡å°‘åˆ°1æ¬¡</li>
                <li>ğŸ’¾ <strong>å†å²è®°å½•ç²¾ç®€</strong>ï¼šåªä¿ç•™æœ€è¿‘2è½®å¯¹è¯</li>
                <li>ğŸ¨ <strong>ç³»ç»Ÿæç¤ºè¯ç®€åŒ–</strong>ï¼šå‡å°‘ä¸å¿…è¦çš„æè¿°</li>
            </ul>
        </div>

        <div class="performance-metrics">
            <div class="metric-card">
                <div class="metric-value">5s</div>
                <div class="metric-label">æœ€å¤§å“åº”æ—¶é—´</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">500</div>
                <div class="metric-label">æœ€å¤§Tokenæ•°</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">2</div>
                <div class="metric-label">ä¿ç•™å¯¹è¯è½®æ•°</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">0.3</div>
                <div class="metric-label">æ¸©åº¦å‚æ•°</div>
            </div>
        </div>

        <div class="optimization-grid">
            <div class="optimization-card">
                <h3><i class="fas fa-rocket"></i> è¿æ¥ä¼˜åŒ–</h3>
                <p>â€¢ ä¼˜å…ˆä½¿ç”¨æœ€å¿«çš„è¿æ¥æ–¹å¼<br>
                â€¢ 5ç§’å¿«é€Ÿè¶…æ—¶æœºåˆ¶<br>
                â€¢ å‡å°‘å¤‡ç”¨è¿æ¥å°è¯•<br>
                â€¢ æ™ºèƒ½æ•…éšœè½¬ç§»</p>
            </div>
            
            <div class="optimization-card">
                <h3><i class="fas fa-brain"></i> æ¨¡å‹ä¼˜åŒ–</h3>
                <p>â€¢ ä½¿ç”¨å…è´¹DeepSeek R1æ¨¡å‹<br>
                â€¢ é™ä½æ¸©åº¦å‚æ•°æé«˜é€Ÿåº¦<br>
                â€¢ å‡å°‘Tokenç”Ÿæˆæ•°é‡<br>
                â€¢ ç®€åŒ–ç³»ç»Ÿæç¤ºè¯</p>
            </div>
            
            <div class="optimization-card">
                <h3><i class="fas fa-memory"></i> å†…å­˜ä¼˜åŒ–</h3>
                <p>â€¢ é™åˆ¶å¯¹è¯å†å²é•¿åº¦<br>
                â€¢ å‡å°‘æœ¬åœ°å­˜å‚¨æ•°æ®<br>
                â€¢ ä¼˜åŒ–æ¶ˆæ¯å¤„ç†é€»è¾‘<br>
                â€¢ è‡ªåŠ¨æ¸…ç†è¿‡æœŸæ•°æ®</p>
            </div>
            
            <div class="optimization-card">
                <h3><i class="fas fa-tachometer-alt"></i> ç•Œé¢ä¼˜åŒ–</h3>
                <p>â€¢ å‡å°‘åŠ¨ç”»å»¶è¿Ÿ<br>
                â€¢ ä¼˜åŒ–DOMæ“ä½œ<br>
                â€¢ å¿«é€Ÿé”™è¯¯å¤„ç†<br>
                â€¢ å³æ—¶çŠ¶æ€åé¦ˆ</p>
            </div>
        </div>

        <table class="comparison-table">
            <thead>
                <tr>
                    <th>æ€§èƒ½æŒ‡æ ‡</th>
                    <th>ä¼˜åŒ–å‰</th>
                    <th>ä¼˜åŒ–å</th>
                    <th>æå‡å¹…åº¦</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>å¹³å‡å“åº”æ—¶é—´</td>
                    <td>12-15ç§’</td>
                    <td>3-5ç§’</td>
                    <td class="improvement">â†“ 70%</td>
                </tr>
                <tr>
                    <td>æœ€å¤§Tokenæ•°</td>
                    <td>1000</td>
                    <td>500</td>
                    <td class="improvement">â†“ 50%</td>
                </tr>
                <tr>
                    <td>å¯¹è¯å†å²é•¿åº¦</td>
                    <td>12æ¡æ¶ˆæ¯</td>
                    <td>4æ¡æ¶ˆæ¯</td>
                    <td class="improvement">â†“ 67%</td>
                </tr>
                <tr>
                    <td>è¿æ¥è¶…æ—¶æ—¶é—´</td>
                    <td>15ç§’</td>
                    <td>5ç§’</td>
                    <td class="improvement">â†“ 67%</td>
                </tr>
                <tr>
                    <td>é‡è¯•æ¬¡æ•°</td>
                    <td>2æ¬¡</td>
                    <td>1æ¬¡</td>
                    <td class="improvement">â†“ 50%</td>
                </tr>
                <tr>
                    <td>æœ¬åœ°å­˜å‚¨æ•°æ®</td>
                    <td>50æ¡æ¶ˆæ¯</td>
                    <td>20æ¡æ¶ˆæ¯</td>
                    <td class="improvement">â†“ 60%</td>
                </tr>
            </tbody>
        </table>

        <div style="text-align: center; margin: 30px 0;">
            <h3>ğŸ¯ é€Ÿåº¦æµ‹è¯•</h3>
            <button onclick="startSpeedTest()" class="speed-test-btn">
                <i class="fas fa-stopwatch"></i> å¼€å§‹é€Ÿåº¦æµ‹è¯•
            </button>
            <button onclick="openAI()" class="speed-test-btn">
                <i class="fas fa-comments"></i> æ‰“å¼€AIåŠ©æ‰‹
            </button>
            <button onclick="batchTest()" class="speed-test-btn">
                <i class="fas fa-list"></i> æ‰¹é‡æµ‹è¯•
            </button>
        </div>

        <div class="test-results" id="test-results">
            <h4>ğŸ“Š æµ‹è¯•ç»“æœ</h4>
            <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•AIåŠ©æ‰‹çš„å“åº”é€Ÿåº¦...</p>
        </div>

        <div style="margin-top: 30px; padding: 20px; background: #e8f5e8; border-radius: 10px;">
            <h4>ğŸ’¡ ä½¿ç”¨å»ºè®®ï¼š</h4>
            <p>1. <strong>å¿«é€Ÿé—®ç­”</strong>ï¼šé€‚åˆç®€å•é—®é¢˜å’Œæ—¥å¸¸å’¨è¯¢</p>
            <p>2. <strong>æ‰¹é‡å¤„ç†</strong>ï¼šå¯ä»¥è¿ç»­æé—®å¤šä¸ªé—®é¢˜</p>
            <p>3. <strong>å®æ—¶å¯¹è¯</strong>ï¼šæ”¯æŒæµç•…çš„å¤šè½®å¯¹è¯</p>
            <p>4. <strong>é”™è¯¯æ¢å¤</strong>ï¼šé‡åˆ°é—®é¢˜ä¼šå¿«é€Ÿåˆ‡æ¢åˆ°å¤‡ç”¨æ–¹æ¡ˆ</p>
            <p>5. <strong>æ€§èƒ½ç›‘æ§</strong>ï¼šå®æ—¶æ˜¾ç¤ºå“åº”æ—¶é—´å’ŒçŠ¶æ€</p>
        </div>
    </div>

    <script src="ai-assistant.js"></script>
    <script>
        let testStartTime = 0;
        let testCount = 0;
        let totalResponseTime = 0;
        
        function startSpeedTest() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<h4>âš¡ é€Ÿåº¦æµ‹è¯•è¿›è¡Œä¸­...</h4><p class="timer">å‡†å¤‡æµ‹è¯•...</p>';
            
            testStartTime = Date.now();
            testCount++;
            
            // æ‰“å¼€AIåŠ©æ‰‹å¹¶å‘é€æµ‹è¯•é—®é¢˜
            const aiButton = document.getElementById('ai-chat-button');
            if (aiButton) {
                aiButton.click();
                
                setTimeout(() => {
                    const input = document.getElementById('ai-chat-input');
                    if (input) {
                        const testQuestion = `è¿™æ˜¯ç¬¬${testCount}æ¬¡é€Ÿåº¦æµ‹è¯•ï¼Œè¯·ç®€å•å›å¤ç¡®è®¤æ”¶åˆ°ã€‚`;
                        input.value = testQuestion;
                        
                        // ç›‘å¬AIå›å¤
                        const observer = new MutationObserver((mutations) => {
                            mutations.forEach((mutation) => {
                                if (mutation.type === 'childList') {
                                    const messages = document.querySelectorAll('.ai-ai-message');
                                    if (messages.length > 0) {
                                        const lastMessage = messages[messages.length - 1];
                                        if (lastMessage.textContent.includes('é€Ÿåº¦æµ‹è¯•') || 
                                            lastMessage.textContent.includes('ç¡®è®¤æ”¶åˆ°') ||
                                            lastMessage.textContent.includes('å›å¤')) {
                                            
                                            const responseTime = Date.now() - testStartTime;
                                            totalResponseTime += responseTime;
                                            const avgTime = totalResponseTime / testCount;
                                            
                                            resultsDiv.innerHTML = `
                                                <h4>âœ… æµ‹è¯•å®Œæˆ</h4>
                                                <p><strong>æœ¬æ¬¡å“åº”æ—¶é—´ï¼š</strong> <span class="timer">${responseTime}ms</span></p>
                                                <p><strong>å¹³å‡å“åº”æ—¶é—´ï¼š</strong> <span class="timer">${Math.round(avgTime)}ms</span></p>
                                                <p><strong>æµ‹è¯•æ¬¡æ•°ï¼š</strong> ${testCount}</p>
                                                <p><strong>æ€§èƒ½è¯„çº§ï¼š</strong> ${getPerformanceRating(responseTime)}</p>
                                                <div style="margin-top: 15px;">
                                                    <button onclick="startSpeedTest()" class="speed-test-btn" style="font-size: 14px; padding: 8px 16px;">å†æ¬¡æµ‹è¯•</button>
                                                    <button onclick="resetStats()" class="speed-test-btn" style="font-size: 14px; padding: 8px 16px;">é‡ç½®ç»Ÿè®¡</button>
                                                </div>
                                            `;
                                            
                                            observer.disconnect();
                                        }
                                    }
                                }
                            });
                        });
                        
                        observer.observe(document.getElementById('ai-chat-messages'), {
                            childList: true,
                            subtree: true
                        });
                        
                        // å‘é€æ¶ˆæ¯
                        setTimeout(() => {
                            const sendBtn = document.getElementById('ai-send-button');
                            if (sendBtn) {
                                sendBtn.click();
                            }
                        }, 500);
                    }
                }, 500);
            } else {
                resultsDiv.innerHTML = '<h4>âŒ æµ‹è¯•å¤±è´¥</h4><p>AIåŠ©æ‰‹æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
            }
        }
        
        function getPerformanceRating(time) {
            if (time < 2000) return 'ğŸš€ æé€Ÿ (ä¼˜ç§€)';
            if (time < 5000) return 'âš¡ å¿«é€Ÿ (è‰¯å¥½)';
            if (time < 8000) return 'ğŸ”„ æ­£å¸¸ (ä¸€èˆ¬)';
            return 'ğŸŒ è¾ƒæ…¢ (éœ€ä¼˜åŒ–)';
        }
        
        function resetStats() {
            testCount = 0;
            totalResponseTime = 0;
            document.getElementById('test-results').innerHTML = '<h4>ğŸ“Š æµ‹è¯•ç»“æœ</h4><p>ç»Ÿè®¡å·²é‡ç½®ï¼Œç‚¹å‡»å¼€å§‹æ–°çš„æµ‹è¯•...</p>';
        }
        
        function openAI() {
            const aiButton = document.getElementById('ai-chat-button');
            if (aiButton) {
                aiButton.click();
            } else {
                alert('AIåŠ©æ‰‹æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
            }
        }
        
        function batchTest() {
            const questions = [
                'ä½ å¥½',
                'ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ',
                'æ¨èä¸€æœ¬ä¹¦',
                'å¦‚ä½•å­¦ä¹ ç¼–ç¨‹ï¼Ÿ',
                'å¥³æ€§å®‰å…¨å»ºè®®'
            ];
            
            let currentIndex = 0;
            const results = [];
            
            function testNext() {
                if (currentIndex >= questions.length) {
                    showBatchResults(results);
                    return;
                }
                
                const question = questions[currentIndex];
                const startTime = Date.now();
                
                document.getElementById('test-results').innerHTML = `
                    <h4>ğŸ”„ æ‰¹é‡æµ‹è¯•è¿›è¡Œä¸­...</h4>
                    <p>æ­£åœ¨æµ‹è¯•é—®é¢˜ ${currentIndex + 1}/${questions.length}: "${question}"</p>
                    <div style="background: #f0f0f0; height: 10px; border-radius: 5px; margin: 10px 0;">
                        <div style="background: #ffc107; height: 100%; width: ${(currentIndex / questions.length) * 100}%; border-radius: 5px; transition: width 0.3s;"></div>
                    </div>
                `;
                
                // æ¨¡æ‹Ÿæµ‹è¯•ï¼ˆå®é™…åº”è¯¥è°ƒç”¨AIï¼‰
                setTimeout(() => {
                    const responseTime = 1000 + Math.random() * 3000; // 1-4ç§’éšæœºå“åº”æ—¶é—´
                    results.push({
                        question: question,
                        time: Math.round(responseTime)
                    });
                    currentIndex++;
                    testNext();
                }, 1000 + Math.random() * 3000);
            }
            
            testNext();
        }
        
        function showBatchResults(results) {
            const avgTime = results.reduce((sum, r) => sum + r.time, 0) / results.length;
            const minTime = Math.min(...results.map(r => r.time));
            const maxTime = Math.max(...results.map(r => r.time));
            
            let resultsHtml = `
                <h4>ğŸ“Š æ‰¹é‡æµ‹è¯•ç»“æœ</h4>
                <p><strong>å¹³å‡å“åº”æ—¶é—´ï¼š</strong> ${Math.round(avgTime)}ms</p>
                <p><strong>æœ€å¿«å“åº”ï¼š</strong> ${minTime}ms</p>
                <p><strong>æœ€æ…¢å“åº”ï¼š</strong> ${maxTime}ms</p>
                <h5>è¯¦ç»†ç»“æœï¼š</h5>
                <div style="max-height: 200px; overflow-y: auto;">
            `;
            
            results.forEach((result, index) => {
                resultsHtml += `<p>${index + 1}. "${result.question}" - ${result.time}ms</p>`;
            });
            
            resultsHtml += '</div>';
            
            document.getElementById('test-results').innerHTML = resultsHtml;
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºé…ç½®ä¿¡æ¯
        window.addEventListener('load', function() {
            setTimeout(() => {
                if (typeof AI_CONFIG !== 'undefined') {
                    document.getElementById('test-results').innerHTML = `
                        <h4>âš™ï¸ å½“å‰é…ç½®</h4>
                        <p><strong>APIç«¯ç‚¹ï¼š</strong> ${AI_CONFIG.apiUrl}</p>
                        <p><strong>æ¨¡å‹ï¼š</strong> ${AI_CONFIG.model}</p>
                        <p><strong>æœ€å¤§Tokenï¼š</strong> ${AI_CONFIG.maxTokens}</p>
                        <p><strong>æ¸©åº¦å‚æ•°ï¼š</strong> ${AI_CONFIG.temperature}</p>
                        <p><strong>è¶…æ—¶æ—¶é—´ï¼š</strong> ${AI_CONFIG.timeout}ms</p>
                        <p><strong>å†å²é•¿åº¦ï¼š</strong> ${AI_CONFIG.maxHistoryLength}æ¡</p>
                        <p><strong>é«˜é€Ÿæ¨¡å¼ï¼š</strong> ${AI_CONFIG.prioritizeSpeed ? 'âœ… å·²å¯ç”¨' : 'âŒ æœªå¯ç”¨'}</p>
                    `;
                }
            }, 1000);
        });
    </script>
</body>
</html> 