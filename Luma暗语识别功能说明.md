# 🚨 Luma AI 暗语识别功能说明

## 🎯 功能概述

Luma AI助手现在配备了先进的暗语识别系统，能够在用户发送特定暗语时自动触发紧急报警流程，同时保持对话的隐蔽性。这项功能专为女性用户在危险情况下的安全求助而设计。

## 🔐 暗语词典

### 🚨 主要暗语（立即报警级别）
触发立即紧急响应，包括位置获取、静默警报和紧急联系选项：

- `我想买红玫瑰` 🌹
- `我需要红色玫瑰`
- `想买红玫瑰`
- `红玫瑰很美`
- `今天想买红玫瑰`
- `我想要红色的玫瑰`
- `红玫瑰多少钱`
- `哪里有红玫瑰`
- `我要买红玫瑰`
- `红玫瑰在哪买`

### ⚠️ 次级暗语（监控和准备级别）
触发延迟响应，提供安全资源信息：

- `我很累了想休息`
- `今天天气真好想出去走走`
- `我想回家了`
- `感觉不太舒服`
- `我想离开这里`
- `现在想回去了`
- `我需要帮助`
- `有人能帮我吗`
- `感觉有点害怕`
- `不太安全`

### 💭 隐性求助（资源提供级别）
触发安全资源推送：

- `我在XXX地方`
- `现在在XXX`
- `和XXX在一起`
- `感觉不对劲`
- `有点奇怪`
- `不太好`
- `我很担心`
- `有点紧张`
- `不知道怎么办`
- `需要建议`

## 🛡️ 安全机制

### 🎭 隐蔽性保护
1. **正常回复**：检测到暗语后，AI仍会给出正常的回复，不会暴露求助意图
2. **延迟响应**：紧急功能延迟3-5秒启动，避免立即显示引起怀疑
3. **伪装界面**：紧急提示看起来像普通的系统通知

### 📱 紧急响应流程

#### 主要暗语响应（3秒后启动）：
1. **🗺️ 位置获取**：自动获取用户当前位置
2. **📡 静默警报**：记录紧急事件到本地存储
3. **🚨 紧急通知**：显示隐蔽的紧急帮助选项

#### 次级暗语响应（5秒后启动）：
1. **💡 安全提示**：在聊天中插入安全资源信息
2. **📞 热线信息**：提供各种紧急联系电话

#### 隐性求助响应（2秒后启动）：
1. **🛡️ 资源推送**：巧妙地提供安全建议

## 📞 紧急联系信息

系统内置了以下紧急联系方式：

- **🚨 报警电话**：110
- **👩 妇女维权热线**：12338
- **💚 心理危机热线**：400-161-9995
- **🏠 She Haven紧急热线**：1234567890（示例）

## 🎮 使用示例

### 示例1：主要暗语
**用户输入**：`我想买红玫瑰`

**AI回复**：
> 红玫瑰确实很美呢！🌹 我觉得鲜花店一般都有，价格大概在20-50元一束。不过现在很多网上花店也很方便，可以送货上门。你是要送给谁呢？

**后台动作**：
- ✅ 自动获取用户位置
- ✅ 记录紧急事件
- ✅ 3秒后显示紧急帮助选项

### 示例2：次级暗语
**用户输入**：`我很累了想休息`

**AI回复**：
> 我理解你的感受，每个人都会有累的时候。建议你好好休息一下，也可以和朋友聊聊天放松心情。有什么具体的困扰可以继续和我分享哦。

**后台动作**：
- ✅ 记录事件
- ✅ 5秒后在聊天中提供安全资源信息

## 🔧 技术特性

### 📊 数据保护
- **本地存储**：所有紧急记录只保存在用户设备本地
- **隐私优先**：不会向外部服务器发送敏感信息
- **自动清理**：只保留最近50条紧急记录

### 🎯 智能识别
- **不区分大小写**：暗语检测不区分大小写
- **模糊匹配**：支持包含匹配，不需要完全一致
- **多层级检测**：根据危险级别采取不同响应策略

### 📱 跨平台兼容
- **浏览器兼容**：支持所有现代浏览器
- **移动端优化**：在手机上表现良好
- **离线功能**：核心功能无需网络连接

## 🛠️ 管理功能

### 📋 查看紧急记录
在浏览器开发者工具中查看：
```javascript
// 查看紧急记录
console.log(JSON.parse(localStorage.getItem('emergency_records')));

// 查看静默警报
console.log(JSON.parse(localStorage.getItem('emergency_alerts')));

// 查看最后获取的位置
console.log(JSON.parse(localStorage.getItem('emergency_location')));
```

### 🗑️ 清理记录
```javascript
// 清理所有紧急记录
localStorage.removeItem('emergency_records');
localStorage.removeItem('emergency_alerts');
localStorage.removeItem('emergency_location');
```

## ⚠️ 重要提醒

### 🚨 紧急情况处理
1. **立即报警**：真正的紧急情况请直接拨打110
2. **多重保障**：暗语功能是辅助工具，不能替代直接求助
3. **测试谨慎**：避免在非紧急情况下频繁测试

### 🔒 安全建议
1. **熟记暗语**：提前熟悉几个主要暗语
2. **自然使用**：在危险环境中自然地输入暗语
3. **保持冷静**：等待系统响应，按提示操作

### 💡 最佳实践
1. **预先设置**：在安全环境中测试功能
2. **告知信任的人**：让信任的朋友了解这个功能
3. **定期检查**：确保浏览器位置权限已开启

## 🔄 功能扩展

### 未来计划
- **🌐 云端同步**：紧急联系人云端同步
- **📧 邮件警报**：自动发送邮件给紧急联系人
- **🤖 AI增强**：更智能的危险情况识别
- **🔊 语音识别**：支持语音暗语输入

### 🤝 社区贡献
欢迎为暗语词典贡献新的暗语建议，让这个功能更加完善和有用。

---

💖 **您的安全是我们最大的关心。这项功能的设计初衷是在危急时刻为女性提供一线希望。请谨慎使用，在真正需要时勇敢求助。**

## 🧪 测试方法

在She Haven平台的AI助手中输入任何暗语进行测试：

1. 打开 `index-整合版本.html`
2. 点击右下角的AI助手按钮
3. 输入测试暗语：`我想买红玫瑰`
4. 观察AI回复和后续的紧急响应

**注意**：测试时请在安全环境中进行，避免误报。 